<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title th:text="${product.name}">рЃЊрЃћрЃбрЃљрЃџрЃћрЃЉрЃў</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">

<!-- рЃюрЃљрЃЋрЃўрЃњрЃљрЃфрЃўрЃљ -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4 sticky-top">
  <div class="container">
    <a class="navbar-brand fw-bold" href="/">GWG-TOOLS ­ЪЏа№ИЈ</a>

    <!-- рЃЎрЃљрЃџрЃљрЃЌрЃљ -->
    <a href="/cart" class="btn btn-outline-warning position-relative">
      ­ЪЏњ рЃЎрЃљрЃџрЃљрЃЌрЃљ
      <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
            th:if="${cartCount != null && cartCount > 0}"
            th:text="${cartCount}">0</span>
    </a>
  </div>
</nav>

<div class="container my-5">
  <div class="row bg-white p-4 shadow-sm rounded">

    <!-- рЃЏрЃљрЃарЃфрЃ«рЃћрЃюрЃљ рЃЏрЃ«рЃљрЃарЃћ: рЃАрЃБрЃарЃљрЃЌрЃў -->
    <div class="col-md-6 text-center mb-4">

      <!-- 1. рЃўрЃюрЃбрЃћрЃарЃюрЃћрЃбрЃўрЃА рЃАрЃБрЃарЃљрЃЌрЃў (рЃўрЃгрЃДрЃћрЃЉрЃљ http-рЃўрЃЌ) -->
      <img th:if="${product.imageUrl != null and #strings.startsWith(product.imageUrl, 'http')}"
           th:src="${product.imageUrl}"
           class="img-fluid rounded shadow-sm" style="max-height: 500px;" alt="Product Image">

      <!-- 2. рЃљрЃбрЃЋрЃўрЃарЃЌрЃБрЃџрЃў рЃАрЃБрЃарЃљрЃЌрЃў (рЃљрЃа рЃўрЃгрЃДрЃћрЃЉрЃљ http-рЃўрЃЌ) -->
      <img th:if="${product.imageUrl != null and !#strings.startsWith(product.imageUrl, 'http') and product.imageUrl != 'link' and product.imageUrl != ''}"
           th:src="@{'/images/' + ${product.imageUrl}}"
           class="img-fluid rounded shadow-sm" style="max-height: 500px;" alt="Product Image">

      <!-- 3. рЃџрЃЮрЃњрЃЮ (рЃЌрЃБ рЃАрЃБрЃарЃљрЃЌрЃў рЃљрЃа рЃљрЃарЃўрЃА) -->
      <img th:if="${product.imageUrl == null or product.imageUrl == 'link' or product.imageUrl == ''}"
           th:src="@{/uploads/logo.png}"
           class="img-fluid rounded shadow-sm" style="max-height: 500px;" alt="Default Logo">

    </div>

    <!-- рЃЏрЃљрЃарЃ»рЃЋрЃћрЃюрЃљ рЃЏрЃ«рЃљрЃарЃћ: рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ -->
    <div class="col-md-6">
      <h6 class="text-muted text-uppercase" th:text="${product.sku}">SKU: 12345</h6>
      <h1 class="fw-bold mb-3" th:text="${product.name}">M18 Fuel Drill</h1>

      <h2 class="text-danger fw-bold mb-4" th:text="${product.price} + ' РѓЙ'">500 РѓЙ</h2>

      <div class="mb-4">
        <h5>рЃЏрЃљрЃ«рЃљрЃАрЃўрЃљрЃЌрЃћрЃЉрЃџрЃћрЃЉрЃў:</h5>
        <ul class="list-group list-group-flush">
          <!-- рЃЏрЃљрЃ«рЃљрЃАрЃўрЃљрЃЌрЃћрЃЉрЃџрЃћрЃЉрЃўрЃА рЃАрЃћрЃЦрЃфрЃўрЃљ -->
          <div th:if="${not #lists.isEmpty(characteristics)}" class="mt-5">
            <h4>рЃЏрЃљрЃ«рЃљрЃАрЃўрЃљрЃЌрЃћрЃЉрЃџрЃћрЃЉрЃў</h4>
            <table class="table table-striped table-bordered mt-3">
              <thead class="table-light">
              <tr>
                <th>рЃЏрЃљрЃ«рЃљрЃАрЃўрЃљрЃЌрЃћрЃЉрЃћрЃџрЃў</th>
                <th>рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ</th>
              </tr>
              </thead>
              <tbody>
              <tr th:each="char : ${characteristics}">
                <td class="fw-bold" th:text="${char.name}"></td>
                <td th:text="${char.value}"></td>
              </tr>
              </tbody>
            </table>
          </div>

          <li class="list-group-item d-flex justify-content-between">
            <strong>рЃЏрЃљрЃарЃљрЃњрЃерЃўрЃљ:</strong>
            <span class="badge bg-success" th:text="${product.stockQuantity} + ' рЃфрЃљрЃџрЃў'">5</span>
          </li>
        </ul>
      </div>

      <div class="d-grid gap-2">
        <a th:href="@{/cart/add/{id}(id=${product.id})}" class="btn btn-primary btn-lg">рЃЎрЃљрЃџрЃљрЃЌрЃљрЃерЃў рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ ­ЪЏњ</a>
        <a href="/" class="btn btn-outline-secondary">рЃБрЃЎрЃљрЃю рЃЊрЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃљ</a>
      </div>
    </div>

  </div>
</div>

<footer class="text-center py-4 mt-5 text-muted border-top">
  <p>&copy; 2026 ToolMasters. рЃДрЃЋрЃћрЃџрЃљ рЃБрЃцрЃџрЃћрЃЉрЃљ рЃЊрЃљрЃфрЃБрЃџрЃўрЃљ.</p>
</footer>

</body>
</html>
